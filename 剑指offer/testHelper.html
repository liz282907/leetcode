<!DOCTYPE html>
<html>

<head>
    <title>剑指offer</title>
</head>

<body>
</body>
<script type="text/javascript">
function Find(target, array) {
    return findTarget(array, 0, array[0].length - 1, target);

    function findTarget(array, i, j, target) {

        while (i < array.length && j >= 0) {
            var upperRight = array[i][j];
            if (upperRight > target) j--;
            else if (upperRight < target) i++;
            else return true;
        }
        return false
    }
}
// Find(7,[[1,2,8,9],[2,4,9,12],[4,7,10,13],[6,8,11,15]])
var majorityElement = function(nums) {
	var index = partition(nums, 0, nums.length - 1),
        start = 0,
        end = nums.length - 1,
        mid = Math.floor(end / 2);
    while (index !== mid) {
        if (index > mid && end>=0) end = index-1;
        else if (index < mid && start< nums.length) start = index+1;
        else break;
        index = partition(nums, start, end);
    }
    return nums[mid]

    function partition(nums, start, end) {
        if(start>end) return
        var randomIndex = start + Math.floor(Math.random() * (end + 1 - start));
        swap(nums, randomIndex, end);
        var i = start,
            j = end - 1,
            target = nums[end]
        while (i < j) {
            while (nums[i] < target && i < j) i++;
            while (nums[j] > target && i < j) j--;
            if (i < j) swap(nums, i++, j--);
        }
        swap(nums, i, end);
        return i;
    }

    function swap(nums, i, j) {
        var temp = nums[j];
        nums[j] = nums[i];
        nums[i] = temp;
    }
};
    majorityElement([4,5,4])
// partition([8,8,7,7,7],0,4)
</script>

</html>
